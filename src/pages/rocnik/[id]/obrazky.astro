---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../../layouts/Layout.astro";
import Gallery from "../../../components/Gallery.astro";

export async function getStaticPaths() {
  const posts = await getCollection("seasons");
  return posts.map((post) => ({
    params: { id: post.id },
    props: { post },
  }));
}

type Props = {
  post: CollectionEntry<"seasons">;
};

const { post } = Astro.props;
---

<Layout>
  <header class="flex justify-between mb-52 relative">
    <a href="/" class="flex flex-col sm:gap-4 gap-1">
      <span class="font-head sm:text-5xl text-[7vw]">Malý festival</span>
      <span class="font-head sm:text-3xl text-[4vw]">na velké zahradě</span>
    </a>
    <h1 class="flex flex-col sm:gap-4 gap-1 text-right">
      <span class="font-head sm:text-5xl text-[7vw]">
        {Number(post.id) - 2022}. ročník
      </span>
      <span class="font-head sm:text-3xl text-[4vw]">
        {post.data.date.toLocaleDateString("cs-CZ")}
      </span>
    </h1>
  </header>
  <Gallery year={post.id} />
</Layout>
